(function(factory){if(typeof define==="function"&&define.amd)define(["jquery"],factory);else factory(jQuery)})(function($){var plugins=[];$.everban={load:function(pluginList,callback){plugins=pluginList;var counter=0,nbCallbacks=2;function done(){if(++counter==nbCallbacks)callback(true)}if($.inArray("swfStorage",plugins)!=-1)if($.swfStorage)$.swfStorage.init(function(value){if(!value)plugins.splice($.inArray("swfStorage",plugins),1);done()});if($.inArray("cookieStorage",plugins)!=-1)if($.cookie){$.cookie.defaults=
{path:"/"};if($.cookieStorage){$.cookieStorage.setExpires(3650);if($.inArray("pngStorage",plugins)!=-1)if($.pngStorage)$.pngStorage.init(function(value){done()})}}},get:function(key,callback){var plugin,pepper,peppers=[];for(var i in plugins){plugin=plugins[i];try{pepper=String($[plugin].get(key));if(pepper.length!=32||/\W/.test(pepper))pepper=undefined;peppers.push(pepper)}catch(e){if(this.debug)alert("GET problem with plugin : "+plugin+"\n"+e)}}if(this.debug)alert("EVERBAN JAVASCRIPT - DATA READING"+
"\n\n"+"Plugins : "+JSON.stringify(plugins,"","")+"\n\n"+"Peppers found : \n"+JSON.stringify(peppers,""," "));callback(election(peppers))},set:function(key,pepper){var plugin;for(var i in plugins){plugin=plugins[i];try{$[plugin].set(key,pepper)}catch(e){if(this.debug)alert("SET problem using plugin : "+plugin+"\n"+e)}}},remove:function(key){var plugin;for(var i in plugins){plugin=plugins[i];try{$[plugin].remove(key)}catch(e){if(this.debug)alert("REMOVE problem using plugin : "+plugin+"\n"+e)}}}};
var election=function(peppers){var pepper,candidates=[],candidate=null,bestnum=0;for(var i in peppers){pepper=peppers[i];if(pepper&&(pepper!=="null"&&(pepper!=="undefined"&&pepper.length==32)))candidates[pepper]=candidates[pepper]===undefined?1:candidates[pepper]+1}for(pepper in candidates)if(candidates[pepper]>bestnum){bestnum=candidates[pepper];candidate=pepper}return candidate};if(!$.isArray)$.isArray=function(x){return x instanceof Array};if(!$.isPlainObject)$.isPlainObject=function(obj){return false}});